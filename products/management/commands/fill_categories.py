from django.core.management.base import BaseCommand
from products.models import Category


class Command(BaseCommand):
    help = 'Fill database with sample categories'

    def handle(self, *args, **options):
        CATEGORIES_DATA = {
            "Продукты питания": {
                "Молочные продукты": ["Молоко", "Сыр", "Йогурты", "Творог"],
                "Мясо и птица": ["Говядина", "Свинина", "Курица", "Колбасы"],
                "Бакалея": ["Крупы", "Макароны", "Мука", "Сахар"],
                "Напитки": ["Соки", "Вода", "Газировка", "Чай", "Кофе"]
            },
            "Электроника": {
                "Смартфоны и гаджеты": ["Смартфоны", "Планшеты", "Умные часы"],
                "Компьютеры": ["Ноутбуки", "ПК", "Мониторы", "Комплектующие"],
                "Техника для дома": ["Телевизоры", "Холодильники", "Стиральные машины"],
                "Аудиотехника": ["Наушники", "Колонки", "Саундбары"]
            },
            "Товары для дома": {
                "Мебель": ["Диваны", "Кровати", "Столы", "Стулья"],
                "Текстиль": ["Шторы", "Постельное белье", "Покрывала"],
                "Кухонные принадлежности": ["Посуда", "Столовые приборы", "Кастрюли"]
            },
            "Одежда и обувь": {
                "Мужская одежда": ["Рубашки", "Брюки", "Куртки", "Футболки"],
                "Женская одежда": ["Платья", "Юбки", "Блузки", "Верхняя одежда"],
                "Обувь": ["Кроссовки", "Туфли", "Сапоги", "Ботинки"]
            },
            "Товары для автомобиля": {
                "Запчасти": ["Аккумуляторы", "Шины", "Тормозные колодки"],
                "Автохимия": ["Масла", "Омывайки", "Очистители"],
                "Аксессуары": ["Чехлы", "Коврики", "Ароматизаторы"]
            },
            "Услуги": {
                "Ремонтные работы": ["Сантехника", "Электрика", "Отделочные работы"],
                "Клининговые услуги": ["Уборка", "Химчистка", "Мойка окон"],
                "Доставка": ["Доставка продуктов", "Доставка товаров"]
            },
            "Прочие товары и услуги": {
                "Прочие товары": [],
                "Прочие услуги": []
            }
        }

        # Создаем категории
        for main_category, subcategories in CATEGORIES_DATA.items():
            main_cat, created = Category.objects.get_or_create(name=main_category)
            self.stdout.write(f'Создана категория: {main_category}')

            for subcategory, products_list in subcategories.items():
                sub_cat, created = Category.objects.get_or_create(
                    name=subcategory,
                    parent=main_cat
                )
                self.stdout.write(f'  └── Подкатегория: {subcategory}')

                # Создаем товарные категории третьего уровня
                for product_name in products_list:
                    Category.objects.get_or_create(
                        name=product_name,
                        parent=sub_cat
                    )
                    self.stdout.write(f'      └── Товар: {product_name}')

        self.stdout.write(self.style.SUCCESS('✅ Категории успешно созданы!'))

